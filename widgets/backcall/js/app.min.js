!window.addEventListener&&function(a,b,c,d,e,f,g){a[d]=b[d]=c[d]=function(a,b){var c=this;g.unshift([c,a,b,function(a){a.currentTarget=c,a.preventDefault=function(){a.returnValue=!1},a.stopPropagation=function(){a.cancelBubble=!0},a.target=a.srcElement||c,b.call(c,a)}]),this.attachEvent("on"+a,g[0][3])},a[e]=b[e]=c[e]=function(a,b){for(var c,d=0;c=g[d];++d)if(c[0]==this&&c[1]==a&&c[2]==b)return this.detachEvent("on"+a,g.splice(d,1)[0][3])},a[f]=b[f]=c[f]=function(a){return this.fireEvent("on"+a.type,a)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),String.prototype.trim||!function(){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}(),!function(a){var b=function(a,b){var c=new Function;return c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.parent=b.prototype,a},c=function(a){return"function"==typeof a},d=function(b){var c=a.Array.isArray;return c||(c=function(b){return"[object Array]"===a.Object.prototype.toString.call(b)}),c(b)},e=function(a){var b=!1;return d(a)===!1&&(b="object"==typeof a),b},f=function(a){return"undefined"==typeof a?!1:!isNaN(a)},g=function(a){return a?"[object String]"===Object.prototype.toString.call(a):!1},h=function(a){if("undefined"==typeof a)return!0;if(0===a)return!1;var b=!a||null==a||"undefined"==typeof a||""===a;if(b&&"[object Array]"===Object.prototype.toString.call(a)&&(b=0==a.length),b){var c;for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)){b=!1;break}}return b},i=function(a,b,c){var d=!1;if(c=c||!1,"undefined"==typeof a&&(d=!0),"function"!=typeof b&&(d=!0),!d)if("[object Array]"===Object.prototype.toString.call(a)){var e=0,f=a.length;for(e=0;f>e;e++)if(c){if(b.call(c,a[e]))break}else if(b.call(a[e],a[e]))break}else if("[object Object]"===Object.prototype.toString.call(a)){var g;for(g in a)if(Object.prototype.hasOwnProperty.call(a,g))if(c){if(b.call(c,g))break}else if(b.call(g,g))break}return!d},j=function(a,b){for(var c=b.length,d=0;c>d;d++)if(b[d]==a)return!0;return!1},k=new Function,l=function(){if("HTMLElement"in window)return function(a){return a instanceof HTMLElement};if(document.createElement("a").constructor){var a,b={};return function(c){return c&&"string"==typeof c.nodeName&&c instanceof((a=c.nodeName.toLowerCase())in b?b[a]:(b[a]=document.createElement(a)).constructor)}}return function(a){return"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName}}(),m=function(){"use strict";function a(a){var c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&"function"==typeof b[c]&&(a[c]=b[c]);return a.subscribers={any:[]},a}var b={subscribers:{any:[]},on:function(a,b,c,d){a=a||"any",b="function"==typeof b?b:c[b],"undefined"==typeof this.subscribers[a]&&(this.subscribers[a]=[]);var e,f=this.subscribers[a],g=f.length;for(e=0;g>e;e++)if(f[e].fn===b&&f[e].context===c)return!1;this.subscribers[a].push({fn:b,context:c||this,once:!!d})},once:function(a,b,c){this.on(a,b,c,!0)},remove:function(a,b,c){this.fireSubscribers("unsubscribe",a,b,c)},fire:function(a,b,c){var d=this;c=!!c,c?setTimeout(function(a,b){return function(){d.fireSubscribers("publish",a,b)}}(a,b),0):this.fireSubscribers("publish",a,b)},fireSubscribers:function(a,b,c,d){if(this._eveEnabled=this._eveEnabled||!0,this._logEvents=this._logEvents||!1,this._eveEnabled){var e,f=b||"any",g=this.subscribers[f],h=g?g.length:0;for(e=0;h>e;e+=1)"publish"===a?"undefined"!=typeof g[e]&&(g[e].fn.call(g[e].context,c),g[e].once&&this.remove(g[e],g[e].fn,g[e].context),this._logEvents&&console.log("Observer event (action, type, arg, context): ",a,b,c,d)):"undefined"!=typeof g[e]&&g[e].fn===c&&g[e].context===d&&(g.splice(e,1),this._logEvents&&console.log("Observer event removed (action, type, arg, context): ",a,b,c,d))}},removeAllEventHandlers:function(a){var b=this.subscribers[a];"[object Array]"===Object.prototype.toString.call(b)&&(this.subscribers[a]=[])},clear:function(){this.subscribers={any:[]}},pause:function(){this._eveEnabled=!1},resume:function(){this._eveEnabled=!0},log:function(a){a=a||!1,this._logEvents=a}};return a}();a.app={extendClass:b,isFunction:c,isObject:e,isArray:d,isNumber:f,isString:g,isEmpty:h,isHTMLElement:l,noop:k,each:i,Observer:m,inArray:j}}(this),!function(a,b,c,d){"use strict";if("undefined"==typeof d)return b.noop;var e=b.noop,f="",g="",h="https://www.google.com/recaptcha/api.js",i="",j="9(999)999-99-99",k=e,l=e,m="^[8]{1}\\(9[\\d]{2}\\)[\\d]{3}-[\\d]{2}-[\\d]{2}$",n=function(){var b="backcall",d=function(){return c.querySelector("."+b+" label.error")},e=function(){return c.querySelector("."+b+' input[name="tel"]')},f=function(){return c.querySelector("."+b+' input[name="name"]')},g=function(){var a=f();return a?a.value:""},h=function(){var a=e();return a?a.value:""},i=function(){return c.querySelector("."+b+" div.g-recaptcha")},j=function(){return"undefined"==typeof a.grecaptcha?"":grecaptcha.getResponse()};return{getNameVal:g,getTelVal:h,getErrorEl:d,getTelEl:e,getNameEl:f,getCaptchaEl:i,getCaptchaVal:j}}(),o=function(){var c=function(){var a='<div class="backcall"><h1>Заказ обратного звонка</h1><form><label class="error"></label><label>Имя</label><input name="name" placeholder="Как к Вам обратиться?"><label>Телефон в формате: "8(9XX)XXX-XX-XX"</label><input name="tel" type="tel" placeholder="8(9XX)XXX-XX-XX" ><div class="g-recaptcha" data-sitekey="'+i+'"></div></form></div>';return a},e=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},o=function(a){var b=new RegExp(m),c=b.test(a);return c},p=function(a){return a=a||"",a.length>1},q=function(a){return a=a||"",a.length>0},r=function(){var a=e(n.getNameVal()).trim(),b=e(n.getTelVal()).trim(),c=n.getCaptchaVal(),d=[];if(o(b)||d.push("Неправильный формат номера телефона"),p(a)||d.push('Проверьте поле "Имя"'),q(c)||d.push('Пройдите проверку "Я не робот"'),d.length){var f=n.getErrorEl();f.innerHTML=Array.prototype.join.call(d,"<br>")}return 0===d.length},s=function(){var a=n.getTelEl();a&&VMasker(a).maskPattern(j)},t=function(){var a=n.getTelEl();a&&VMasker(a).unMask()},u=function(b){if(r()){var c=e(n.getNameVal()),d=e(n.getTelVal()),f=n.getCaptchaVal(),h={name:c,tel:VMasker.toNumber(d),captcha:f};nanoajax.ajax({url:g,method:"POST",body:"ajax="+JSON.stringify(h)},function(c,d,e){var f=JSON.parse(d);"ok"===f.status?(n.getErrorEl().innerHTML="Заявка принята!",a.setTimeout(function(a){return function(){a.hide()}}(b),1e3)):(n.getErrorEl().innerHTML="Ошибка обработки заявки. Попробуйте позже. "+f.response,a.setTimeout(function(a){return function(){a.hide()}}(b),1e3))},function(a,b){n.getErrorEl().innerHTML="Не удалось выполнить запрос"})}},v=function(a){t(),a.hide(),l()},w=function(){var c=n.getCaptchaEl();c&&b.isObject(a.grecaptcha)&&(grecaptcha.reset(),grecaptcha.render(c,{sitekey:i}))},x=function(){var a=c(),b=nanoModal(a,{overlayClose:!1,autoRemove:!0,buttons:[{text:"Заказать!",handler:u,primary:!0},{text:"Отменить",handler:v}]});b.show(),s(),w(),k(b)},y=function(c){var e=[f+"/css/backcall.css"];b.isObject(typeof a.nanoajax)||e.push(f+"/js/nanoajax.min.js"),b.isFunction(a.VMasker)||e.push(f+"/js/vanilla-masker.min.js"),b.isFunction(a.nanoModal)||e.push(f+"/js/nanomodal.min.js"),b.isObject(a.grecaptcha)||e.push(h),d.load(e,c)},z=function(a){y(function(){x()})};return{onOpenDialogElClick:z}}(),p=function(a){var b=a.button;b.addEventListener("click",o.onOpenDialogElClick)},q=function(a){return b.isObject(a)?b.isHTMLElement(a.button)?b.isEmpty(a.appHomePath)?(console&&console.log&&console.log("appHomePath is not specified"),!1):(f=a.appHomePath,b.isEmpty(a.serverHandlerPath)?(console&&console.log&&console.log("serverHandlerPath is not specified"),!1):(g=a.serverHandlerPath,b.isEmpty(a.captchaPath)?(console&&console.log&&console.log("captchaPath is not specified"),!1):(h=a.captchaPath,b.isEmpty(a.captchaSitekey)?(console&&console.log&&console.log("captchaSitekey is not specified"),!1):(i=a.captchaSitekey,b.isEmpty(a.telMask)||(j=a.telMask),b.isEmpty(a.telValidateRegExp)||(m=a.telValidateRegExp),b.isFunction(a.afterOpen)&&(k=a.afterOpen),b.isFunction(a.afterClose)&&(l=a.afterClose),void p(a))))):(console&&console.log&&console.log("button is not a HTMLElement!"),!1):!1};return b.core={run:q},b}(this,this.app||(this.app={}||this.app),this.document,this.ljs);